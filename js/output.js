!function(){var t=function(t){var e;return function(a){return e||t(e={exports:{},parent:a},e.exports),e.exports}},e=t(function(t,e){const a=document.querySelector(".tasks__list"),s=$(".footer__count");new MutationObserver(function(){const t=a.children.length,e=1===t?"":"s";s.text(`${t} item${e} left`)}).observe(a,{childList:!0}),d.getTasks().forEach(t=>{i(t)})}),a=t(function(t,e){const a=$($("template").prop("content")).find(".task");a.click(t=>{t.target.matches('[type="checkbox"]')&&(l($(t.delegateTarget)),$(t.delegateTarget).find("[type=text]").trigger("blur"))}),a.dblclick(t=>{if(t.target.matches('[type="text"]')){const e="task--edit",a=250,s=$(t.delegateTarget),o=$(t.target);o.attr("readonly",!1),s.addClass(e),function(t){const e=t.value.length;t.focus(),t.setSelectionRange(e,e)}(o.get(0));const n=t=>{13!==t.keyCode&&27!==t.keyCode||(t.preventDefault(),o.trigger("blur"),o.off("keydown",n))};o.keydown(n);const i=s.find(".task__delete"),l=()=>{const t=s.data("id");s.addClass("fade-out-left"),setTimeout(()=>{s.remove()},a),d.delete(t)};i.click(l),o.blur(()=>{i.addClass("fade-out-right"),setTimeout(()=>{i.off(),i.removeClass("fade-out-right"),s.removeClass(e)},a),d.update(t=>(t.id===s.data("id")&&(t.value=o.val()),t)),o.attr("readonly",!0)})}})}),s=t(function(t,e){const a=$(".tasks__list"),s=new MutationObserver(function(){if(a.get(0).childElementCount>1||a.get(1).childElementCount>1){const t=$(".footer__info"),e=1550;t.addClass("fade-out").css({"animation-duration":"500ms","animation-delay":"1000ms"}),setTimeout(()=>{t.remove()},e),a.each((t,e)=>s.disconnect(e))}});a.each((t,e)=>s.observe(e,{childList:!0})),$(".filters > input[type=radio]").change(t=>{const e=$(".tasks__list:not(.tasks__list--completed)");"completed"===t.delegateTarget.id?(e.addClass("fade-out-left"),setTimeout(()=>{e.hide().removeClass("fade-out-left")},250)):e.show()}),$(".filters__clear").click(t=>{$(".task--completed").each((t,e)=>{const a=$(e),s=a.data("id");a.removeAttr("style"),a.addClass("fade-out-left"),setTimeout(()=>{a.remove()},250),d.delete(s)})})}),o=t(function(t,e){const a=$(".add__input");a.keydown(t=>{if(13===t.keyCode&&a.val().length>0){const t={value:a.val(),completed:!1,id:c()};i(t),d.store(t),a.val("")}}),$(".add__select").click(()=>{$(".task:not(.task--completed)").each((t,e)=>l($(e)))})}),n=t(function(t,e){const a=$(".header__time"),s=$(".header__day"),o=$(".header__date");let n;function d(){const t=(n=new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",weekday:"long",day:"2-digit"});a.attr("datetime",n.toISOString()),t.replace(/(\w+),(.+)/,(t,e,a)=>{s.text(e),o.text(a)})}d();const i=new Date(n);i.setDate(i.getDate()+1),i.setHours(0,0,0,0);const l=i.getTime()-n.getTime();setTimeout(()=>{d()},l)}),d={delete(t){localStorage.setItem("tasks",JSON.stringify(this.getTasks().filter(e=>e.id!==t)))},update(t){const e=this.getTasks();localStorage.setItem("tasks",JSON.stringify(e.map(t)))},store(t){const e=this.getTasks()||[];e.push(t),localStorage.setItem("tasks",JSON.stringify(e))},getTasks:()=>JSON.parse(localStorage.getItem("tasks"))||[]},i=function(t){const e=$($("template").prop("content")).find(".task").clone(!0),a=$(".tasks__list:not(.tasks__list--completed)"),s=$(".tasks__list--completed");return e.find("input[type=text]").attr("value",t.value),e.data("id",t.id),t.completed?(e.addClass("task--completed"),s.prepend(e),e.off()):a.prepend(e),e},l=function(t){const e=$(".tasks__list--completed");t.addClass("task--completed").off().removeAttr("style"),e.prepend(t),d.update(e=>(e.id===t.data("id")&&(e.completed=!0),e))},c=function(){return Math.random().toString(36).substr(2,9)};$(()=>{n({}),o({}),s({}),a({}),e({})})}();